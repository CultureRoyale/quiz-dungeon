<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<body>
    <div th:fragment="userHpBar" id="user-hp-container"
        class="bg-gray-800 border-2 border-gray-600 rounded-lg p-3 font-dungeon text-white shadow-lg select-none w-full max-w-3xl mx-auto">
        <!-- Top Row -->
        <div class="flex flex-col md:flex-row justify-between items-end mb-1 px-1 gap-2 md:gap-0">
            <!-- Username & Level -->
            <div class="text-xl md:text-2xl tracking-wide drop-shadow-md flex items-baseline gap-2">
                <span th:text="${user.username}">User123</span>
                <span th:text="'Lvl ' + ${user.level}" class="text-gray-400 text-base md:text-lg">Lvl 1</span>
            </div>
            <!-- Gold -->
            <div class="flex items-center gap-3 md:gap-4 mb-1">
                <!-- Attack -->
                <div class="flex items-center gap-1">
                    <span th:text="${user.attack}" class="text-white text-lg md:text-2xl drop-shadow-md">5</span>
                    <img th:src="@{/images/sword.svg}" alt="Attack" class="w-5 h-5 md:w-6 md:h-6">
                </div>
                <!-- Dungeon Boost (if applicable, assuming user has a dungeon) -->
                <div class="flex items-center gap-1" th:if="${user.dungeon != null}">
                    <span th:text="'+' + ${user.dungeon.damageBoost} + '%'"
                        class="text-red-500 text-base md:text-xl drop-shadow-md"></span>
                    <img th:src="@{/images/dungeon_icon.svg}" alt="Dungeon" class="w-4 h-4 md:w-5 md:h-5">
                </div>
                <!-- Gold -->
                <div class="flex items-center gap-1">
                    <span th:text="${user.gold}" class="text-[#F1B32B] text-lg md:text-2xl drop-shadow-md">500</span>
                    <img th:src="@{/images/gold.svg}" alt="Gold" class="w-5 h-5 md:w-6 md:h-6">
                </div>
            </div>
        </div>

        <!-- HP Bar Container -->
        <div class="relative w-full mt-4 mb-2">
            <!-- HP Text (Overlay) -->
            <div class="absolute left-0 right-0 bottom-6 flex justify-center z-20 pointer-events-none">
                <span
                    class="text-xl leading-none drop-shadow-[0_2px_0_rgba(0,0,0,1)] stroke-black text-white font-dungeon tracking-wider"
                    style="-webkit-text-stroke: 1.5px black; paint-order: stroke fill;"
                    th:text="'Hp : ' + ${user.currentHp} + '/' + ${user.maxHp}">Hp : 50/80</span>
            </div>

            <!-- Bar -->
            <div class="relative w-full h-8 bg-gray-900 rounded border-2 border-black overflow-hidden z-10">
                <!-- Progress Bar -->
                <div id="user-hp-progress" class="h-full transition-all duration-500 ease-out"
                    th:style="'width: ' + (${user.maxHp} > 0 ? (${user.currentHp} * 100.0 / ${user.maxHp}) : 0) + '%; background: linear-gradient(to bottom, #4ade80 50%, #166534 50%);'">
                </div>


            </div>
        </div>
    </div>
</body>

</html>