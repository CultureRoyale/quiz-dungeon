<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<body>

    <header th:fragment="header" class="bg-gray-900 w-full text-white font-dungeon select-none relative z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-end">

            <a th:href="@{/}" class="flex items-center gap-2 group hover:opacity-90 transition-opacity pb-1">
                <img th:src="@{/images/logo_horizontal.svg}" alt="Quiz Dungeon Logo"
                    class="h-10 md:h-12 w-auto object-contain" />
            </a>

            <!-- Desktop Nav -->
            <nav class="hidden md:flex gap-4 items-center mb-1">

                <div class="relative group cursor-pointer z-50"> <button
                        class="flex items-center gap-2 text-2xl font-quizzical font-black uppercase tracking-widest pb-2 border-b-4 border-gray-700 hover:border-white hover:text-gray-100 transition-all duration-200">
                        <span class="drop-shadow-[0_4px_0_rgba(0,0,0,1)] ">Jouer</span>
                        <svg class="w-5 h-5 transition-transform duration-200 group-hover:rotate-180" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M19 9l-7 7-7-7">
                            </path>
                        </svg>
                    </button>

                    <div class="absolute top-full left-0 hidden group-hover:block min-w-[280px] pt-2">

                        <div
                            class="bg-gray-800 text-white border-2 border-gray-700 rounded-b-md shadow-xl flex flex-col overflow-hidden">

                            <a th:href="@{/roadmap}"
                                class="flex items-center gap-2 px-4 py-3 text-white hover:bg-gray-700 hover:text-amber-500 transition-colors border-b border-gray-700 last:border-0">
                                <svg fill="currentColor" width="17" height="17" viewBox="0 0 256 256" id="Flat"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M221.65723,34.34326A8.00246,8.00246,0,0,0,216,32h-.02539l-63.79883.20117A8.00073,8.00073,0,0,0,146.0332,35.106L75.637,120.32275,67.31348,111.999A16.02162,16.02162,0,0,0,44.68555,112L32.001,124.68555A15.99888,15.99888,0,0,0,32,147.31348l20.88672,20.88769L22.94531,198.14258a16.01777,16.01777,0,0,0,.001,22.62695l12.28418,12.28418a16.00007,16.00007,0,0,0,22.62793,0L87.79883,203.1123,108.68652,224.001A16.02251,16.02251,0,0,0,131.31445,224L143.999,211.31445A15.99888,15.99888,0,0,0,144,188.68652l-8.32324-8.32324,85.21679-70.39648a8.00125,8.00125,0,0,0,2.90528-6.14258L224,40.02539A8.001,8.001,0,0,0,221.65723,34.34326Zm-13.84668,65.67822-83.49829,68.97706L111.314,156l54.34327-54.34277a8.00053,8.00053,0,0,0-11.31446-11.31446L100,144.686,87.00195,131.6875,155.97852,48.189l51.99609-.16357Z" />
                                </svg>
                                Défier un Boss
                            </a>

                            <a th:href="@{/dungeon/attack}"
                                class="flex items-center gap-2 px-4 py-3 text-white hover:bg-gray-700 hover:text-amber-500 transition-colors border-b border-gray-700 last:border-0">
                                <svg width="17" height="17" viewBox="0 0 19 30" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M12.3187 21.4989V12.3266H10.4396L6.68132 14.1611V21.4989H12.3187ZM2.92308 25.1678V8.65772H6.68132V10.4922L10.4396 8.65772H14.1978C14.7067 8.65772 15.1472 8.83925 15.5191 9.20232C15.891 9.56539 16.0769 9.99534 16.0769 10.4922V25.1678H2.92308Z"
                                        fill="currentColor" />
                                    <path
                                        d="M19 30H0V26.3359H19V30ZM15.5654 3.66412H12.3956V0H7.1776L7.1776 3.66412H3.74367L3.74367 0H0.309114V6.87023H19V0H15.5654L15.5654 3.66412Z"
                                        fill="currentColor" />
                                    <path
                                        d="M12.3956 0V3.66412H15.5654L15.5654 0H19V6.87023H0.309114V0H3.74367L3.74367 3.66412H7.1776L7.1776 0H12.3956Z"
                                        fill="currentColor" />
                                </svg>
                                Attaquer un Donjon
                            </a>

                        </div>
                    </div>

                </div>

                <div class="relative group cursor-pointer">
                    <a th:href="@{/leaderboard}">
                        <button
                            class="flex items-center gap-2 text-2xl font-quizzical font-black uppercase tracking-widest pb-2 border-b-4 border-gray-700 hover:border-white hover:text-gray-100 transition-all duration-200">
                            <span class="drop-shadow-[0_4px_0_rgba(0,0,0,1)]">Classement</span>
                        </button>
                    </a>
                </div>

                <div class="relative group cursor-pointer">
                    <a th:href="@{/shop}">
                        <button
                            class="flex items-center gap-2 text-2xl font-quizzical font-black uppercase tracking-widest pb-2 border-b-4 border-gray-700 hover:border-white hover:text-gray-100 transition-all duration-200">
                            <span class="drop-shadow-[0_4px_0_rgba(0,0,0,1)]">Boutique</span>
                        </button>
                    </a>
                </div>
            </nav>

            <div class="hidden md:flex items-center mb-1 gap-4">
                <div sec:authorize="isAuthenticated()" class="relative group cursor-pointer">
                    <a th:href="@{/profile}"
                        class="flex items-center gap-2 text-2xl font-quizzical font-black uppercase tracking-widest pb-2 border-b-4 border-gray-700 hover:border-white hover:text-gray-100 transition-all duration-200">
                        <span class="drop-shadow-[0_4px_0_rgba(0,0,0,1)]">Mon profil</span>
                    </a>
                </div>
                <div sec:authorize="isAuthenticated()" class="relative group cursor-pointer">
                    <form th:action="@{/logout}" method="post">
                        <button type="submit"
                            class="flex items-center gap-2 text-2xl font-quizzical font-black uppercase tracking-widest pb-2 border-b-4 border-gray-700 hover:border-white hover:text-gray-100 transition-all duration-200">
                            <span class="drop-shadow-[0_4px_0_rgba(0,0,0,1)]">Deconnexion</span>
                        </button>
                    </form>
                </div>
                <div sec:authorize="!isAuthenticated()" class="relative group cursor-pointer">
                    <a th:href="@{/login}"
                        class="flex items-center gap-2 text-2xl font-quizzical font-black uppercase tracking-widest pb-2 border-b-4 border-gray-700 hover:border-white hover:text-gray-100 transition-all duration-200">
                        <span class="drop-shadow-[0_4px_0_rgba(0,0,0,1)]">Se connecter</span>
                    </a>
                </div>
                <div sec:authorize="!isAuthenticated()" class="relative group cursor-pointer">
                    <a th:href="@{/register}"
                        class="flex items-center gap-2 text-2xl font-quizzical font-black uppercase tracking-widest pb-2 border-b-4 border-gray-700 hover:border-white hover:text-gray-100 transition-all duration-200">
                        <span class="drop-shadow-[0_4px_0_rgba(0,0,0,1)]">S'inscrire</span>
                    </a>
                </div>
            </div>

            <!-- Mobile Hamburger Button -->
            <div class="md:hidden flex items-center">
                <button id="mobile-menu-btn" class="text-white focus:outline-none">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>

        </div>

        <!-- Mobile Menu (Hidden by default) -->
        <div id="mobile-menu"
            class="hidden md:hidden bg-gray-800 border-t border-gray-700 absolute w-full left-0 top-full shadow-xl">
            <div class="flex flex-col px-4 py-2 space-y-2">

                <!-- Play Section -->
                <div class="border-b border-gray-700 pb-2">
                    <span class="block text-gray-400 text-sm uppercase mb-1">Jouer</span>
                    <a th:href="@{/roadmap}" class="block py-2 text-white hover:text-amber-500 text-lg">Défier un
                        Boss</a>
                    <a th:href="@{/dungeon/attack}" class="block py-2 text-white hover:text-amber-500 text-lg">Attaquer
                        un Donjon</a>
                </div>

                <a th:href="@{/leaderboard}"
                    class="block py-2 text-white hover:text-amber-500 text-lg border-b border-gray-700">Classement</a>

                <a th:href="@{/shop}"
                    class="block py-2 text-white hover:text-amber-500 text-lg border-b border-gray-700">Boutique</a>

                <div sec:authorize="isAuthenticated()">
                    <a th:href="@{/profile}" class="block py-2 text-white hover:text-amber-500 text-lg">Mon profil</a>
                    <form th:action="@{/logout}" method="post" class="block py-2">
                        <button type="submit"
                            class="text-white hover:text-amber-500 text-lg w-full text-left">Deconnexion</button>
                    </form>
                </div>

                <div sec:authorize="!isAuthenticated()">
                    <a th:href="@{/login}" class="block py-2 text-white hover:text-amber-500 text-lg">Se connecter</a>
                    <a th:href="@{/register}" class="block py-2 text-white hover:text-amber-500 text-lg">S'inscrire</a>
                </div>
            </div>
        </div>

        <script>
            document.getElementById('mobile-menu-btn').addEventListener('click', function () {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            });
        </script>
    </header>

</body>

</html>