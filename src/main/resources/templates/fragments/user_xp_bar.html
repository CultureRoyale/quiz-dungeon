<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<body>
    <div th:fragment="userXpBar" id="user-xp-container"
        class="bg-gray-800 border-2 border-gray-600 rounded-lg p-3 font-dungeon text-white shadow-lg select-none w-full max-w-3xl mx-auto mb-6 relative">

        <!-- Large XP Icon (Absolute Positioned) -->
        <div class="absolute top-9 w-12 h-12 md:w-16 md:h-16 z-30 left-2 md:left-auto">
            <img th:src="@{/images/xp_icon.png}" alt="Level" class="w-full h-full object-contain drop-shadow-xl">
            <span
                class="absolute inset-0 flex items-center justify-center font-dungeon text-white text-lg md:text-2xl shadow-black drop-shadow-md pb-1"
                th:text="${user.level}" style="text-shadow: 3px 3px 0 #000;">1</span>
        </div>

        <!-- Top Row (Next Rewards) -->
        <div class="flex justify-end items-end mb-1 px-1 pl-14 md:pl-20">
            <div class="flex flex-wrap justify-end items-center gap-2 md:gap-4 mb-1">
                <span class="text-gray-400 text-xs md:text-sm uppercase mr-1 md:mr-2">Prochaine RÃ©compense :</span>
                <!-- Next HP -->
                <div class="flex items-center gap-1">
                    <span class="text-red-400 text-lg md:text-xl drop-shadow-md">+10</span>
                    <img th:src="@{/images/hp.svg}" alt="HP" class="w-5 h-5 md:w-6 md:h-6">
                </div>
                <!-- Next Gold -->
                <div class="flex items-center gap-1">
                    <span th:text="'+' + ${(user.level + 1) * 100}"
                        class="text-[#F1B32B] text-lg md:text-xl drop-shadow-md">+200</span>
                    <img th:src="@{/images/gold.svg}" alt="Gold" class="w-5 h-5 md:w-6 md:h-6">
                </div>
            </div>
        </div>

        <!-- XP Bar Container -->
        <div class="relative w-full mt-2 mb-2 pl-2 md:pl-4">
            <!-- XP Text (Overlay) -->
            <div class="absolute left-0 right-0 bottom-6 flex justify-center z-20 pointer-events-none">
                <span
                    class="text-lg md:text-xl leading-none drop-shadow-[0_2px_0_rgba(0,0,0,1)] stroke-black text-white font-dungeon tracking-wider"
                    style="-webkit-text-stroke: 1.5px black; paint-order: stroke fill;"
                    th:text="'XP : ' + ${user.xp} + '/' + ${user.level * 100}">XP : 0/100</span>
            </div>

            <!-- Bar -->
            <div class="relative w-full h-8 bg-gray-900 rounded border-2 border-black overflow-hidden z-10">
                <!-- Progress Bar -->
                <div id="user-xp-progress" class="h-full transition-all duration-500 ease-out"
                    th:style="'width: ' + (${user.level * 100} > 0 ? (${user.xp} * 100.0 / (${user.level * 100})) : 0) + '%; background: linear-gradient(to bottom, #20EAFE 50%, #24BADE 50%);'">
                    <!-- Shine effect -->
                    <div class="absolute top-0 left-0 w-full h-1/2 bg-white opacity-20"></div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>