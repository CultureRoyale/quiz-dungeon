<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/layout}">

<head>
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <title>Quiz Battle</title>
    <style>
        .font-dungeon {
            font-family: 'Super Crawler';
        }

        /* Custom scrollbar for webkit */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1f2937;
        }

        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>

<body class="bg-gray-800 text-white min-h-screen font-sans selection:bg-amber-500 selection:text-black">

    <!-- Main Battle Container -->
    <div layout:fragment="content"
        class="container mx-auto px-4 py-8 flex flex-col lg:flex-row justify-center items-start gap-8">

        <audio th:src="@{/audios/Battle.mp3}" autoplay loop></audio>


        <!-- Left Column: Boss -->
        <div class="flex-shrink-0 sticky top-4">
            <div
                th:replace="~{fragments/boss_hp_bar :: bossHpBar(name=${bossName}, currentHp=${bossHp}, maxHp=${bossMaxHp}, atk=${bossAtk}, imageUrl=${bossImage})}">
            </div>
        </div>

        <!-- Right Column: Quiz & User -->
        <div class="flex flex-col gap-6 w-full max-w-3xl">

            <!-- Quiz Interface -->
            <div>
                <div
                    th:replace="~{fragments/quiz-interface-options :: choices(question=${question}, choices=${choices}, selectedChoiceId=${selectedChoiceId})}">
                </div>
            </div>

            <!-- Separator -->
            <div class="w-full h-0.5 bg-gray-700 rounded-full"></div>

            <!-- User HP Bar -->
            <div th:replace="~{fragments/user_hp_bar :: userHpBar(user=${user}, compact=false)}"></div>

        </div>
    </div>

</body>

</html>